<!DOCTYPE html>

<html lang="en" class="fluigiPage">
<head>
    <title> {{title}} </title>
    <link rel="stylesheet" href="http://cdn.webix.com/edge/webix.css" type="text/css">
    <script src="http://cdn.webix.com/edge/webix.js" type="text/javascript"></script>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="../stylesheets/main.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script src="../javascripts/settings.js" > </script>
    <script type="text/javascript" src="../javascripts/valvecontrol.js"></script>
    <link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.12/css/jquery.dataTables.css">
    <script type="text/javascript" charset="utf8" src="//cdn.datatables.net/1.10.12/js/jquery.dataTables.js"></script>
    <script type="text/javascript" src="../javascripts/initiate_data.js"></script>
    <script src="https://code.jquery.com/jquery-2.2.4.js" integrity="sha256-iT6Q9iMJYuQiMWNd9lDyBUStIq/8PuOW33aOqmvFpqI=" crossorigin="anonymous"></script>

    <script src="../javascripts/serialcommunication.js"></script>


    <link rel="stylesheet" href="https://cdn.jsdelivr.net/bootstrap-tour/0.10.3/css/bootstrap-tour-standalone.min.css">


    <!--Template for valves to be placed over graph canvas-->
    <template id="valve-template" action="this.preventDefault();">
        <div class ="valve" action="this.preventDefault();">
            <a class="valve_marker" action="this.preventDefault();">
                <img class="valve_color" action="this.preventDefault();" src="../images/fluigi/valveMarkerOpen.svg" width="40" height="40">
            </a>
        </div>
    </template>
    <link rel="stylesheet" type="text/css" href="http://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css"/>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
    <script type="text/javascript" src="../javascripts/modalSupportFluigi.js" > </script>
</head>

<body>


<!--Fluigi Navigation Bar-->
<nav class="navbar navbar-fixed-top" id="navBar">
    <div class="container-fluid">

        <div class="navbar-header">
            <a class="navbar-brand" >
                <img alt="Brand" src="../images/fluigi/fluigiLogoFluigi.png">
            </a>
        </div>

        <div>
            <ul class="nav navbar-nav">
                <li class="nav-item"><a class="nav-link" href="../"> <img src="../images/fluigi/homeButtonTransparent.png"> </a></li>
                <li class="nav-item"><a class="nav-link"> <img onclick="settingsButtonPressed();" src="../images/fluigi/settingsIcon.png" > </a></li>
                <!--<li class="nav-item"> <a class="nav-link" href="../serialcommunication"> <img height= "60" src="../images/fluigi/connectedIcon.png"></a></li>-->
                <li class="nav-item"><img onclick= "window.open('../serialcommunication')" height= "100" class="myBtn" src="../images/fluigi/connectedIcon.png" onmouseover="this.height='98'" onmouseout="this.height='100'"></li>
                <li class="nav-item"><img onclick="openDebugger()" height="90" src="../images/fluigi/debug_icon4.png" id="myDebuggerBtn"  class="modal_button" onmouseover="this.height='88'" onmouseout="this.height='90'"></li>

            </ul>
        </div>
    </div>
</nav>


<!--Draw Canvas (resize to page width/height in js)-->
<div id="container">
    <canvas id="canvasID" ></canvas>
    <!--JS to draw SVG in canvas-->
    <script src="../javascripts/fluigiGraph.js" type="application/javascript"></script>
    <!--This is where valves go!-->
    <div id="content"></div>
</div>


<!--Upload Bar-->
<div id= "upload_bar" class="uploadbar" align="center">
    <div>

        <form id="uploadForm"
              enctype="multipart/form-data"
              action="/api/photo"
              method="post">
            <div id="div1"><input id= "inputfile" class="inputButton" type="file" name="myjson" /></div>

        <div id="div3">
            <input id="uploadfile" class= "inputButton" type="submit" value="Upload JSON" name="submit">
            <span id = "status"></span>
        </div>

        </form>
    </div>


    <div>
        <form id="uploadForm2"
                  enctype="multipart/form-data"
                  action="/api/svg"
                  method="post">
                <div id="div2"><input id= "inputfile2" class="inputButton" type="file" name="mysvg" /></div>

            <div id="div4">
                <input id="uploadfile2" class= "inputButton" type="submit" value="Upload SVG" name="submit">
                <span id = "status2"></span>
            </div>

        </form>
    </div>
</div>



<!-- Trigger/Open The Modal -->
<!-- The Modal -->
<div id="debugger_modal" class="modal">

    <div class="modal-content">
        <div class="modal-header">
            <h2>Pump & Motor Debugger</h2>
        </div>
        <div class="modal-body">
        </br>
        <p> Debugger in development. </br> This page allows you to select a pump, change its state, and precisely control the motor which controls the pump. </p>

        <form class="actuators_debugger">
            Valve/Motor to Control:<br>
            <input id="ValveNumberSelectorDebug" type="text" ><br>
            State to apply:<br>
            <input id="ValveStateAssignerDebug" type="text" ><br>
            Or, PWM value to apply:<br>
            <input id="MotorPositionAssignerDebug" type="text" ><br><br>
            <input class="operate_modal" type="submit" value="Change pump state" onclick="mediateValveState(event)">
            <input class="operate_modal" type="submit" value="Change motor position" onclick="mediateMotorPosition(event)">
        </form>
        </div>
        <div class="modal-footer">
            <button class="close_modal" onclick="closeDebugger()" >Close Debugger</button>
        </div>
    </div>

</div>


<form class="actuators">
    Valve to Actuate:<br>
    <input id="ValveNumberSelector" type="text" ><br>
    State to Apply:<br>
    <input id="ValveStateAssigner" type="text" ><br><br>
    <input type="submit" value="Send to Arduino" onclick="mediateValveState(event)">
</form>




<!-- LEAVE JS FOR LAST - faster loading time -->
<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

</body>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery.form/3.51/jquery.form.min.js"></script>

<script src="../javascripts/uploadBar.js" type="application/javascript"></script>

</html>